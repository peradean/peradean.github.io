<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Device Mystery</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: black;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }

        .screen {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 90%;
            max-width: 600px;
            text-align: center;
            color: white;
        }

        .active {
            display: flex;
        }

        #device-text {
            color: gray;
            font-family: serif;
            font-size: clamp(14px, 4vw, 18px);
            opacity: 1;
            transition: opacity 1s ease;
        }

        .prompt {
            color: #00ff00;
            font-size: clamp(16px, 5vw, 24px);
            margin-bottom: 15px;
        }

        input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid gray;
            color: white;
            padding: 8px;
            font-size: 16px;
            width: 200px;
            max-width: 80%;
            text-align: center;
        }

        #name-display {
            font-size: clamp(36px, 10vw, 72px);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        .spark {
            position: absolute;
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            animation: sparkle 1.5s ease-out forwards;
            box-shadow: 0 0 5px white;
        }

        .mist {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: mist 2s linear forwards;
        }

        @keyframes sparkle {
            0% { transform: scale(0); opacity: 1; }
            100% { transform: scale(2); opacity: 0; }
        }

        @keyframes mist {
            0% { transform: translateY(0); opacity: 0.5; }
            100% { transform: translateY(-50px); opacity: 0; }
        }

        #response-text {
            font-size: clamp(14px, 4vw, 18px);
            margin-top: 20px;
        }

        .buttons {
            margin-top: 15px;
        }

        button {
            padding: 8px 16px;
            margin: 5px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid gray;
            color: white;
            cursor: pointer;
        }

        #location-time {
            font-size: clamp(14px, 4vw, 18px);
        }

        .dot {
            position: absolute;
            background: black;
            border-radius: 50%;
        }
    </style>
</head>
<body>
    <div id="device-screen" class="screen active">
        <div id="device-text"></div>
    </div>
    <div id="name-screen" class="screen">
        <div class="prompt">NAME YOUR CHARACTER</div>
        <input type="text" id="name-input" maxlength="20">
    </div>
    <div id="name-display" class="screen"></div>
    <div id="age-screen" class="screen">
        <div class="prompt">HOW OLD ARE YOU?</div>
        <input type="number" id="age-input" maxlength="2">
    </div>
    <div id="response-screen" class="screen">
        <div id="response-text"></div>
    </div>
    <div id="location-screen" class="screen">
        <div id="location-time"></div>
    </div>

    <script>
        const proverbs = [
            "Beware what lurks in shadows ahead",
            "Take heed of coming darkness",
            "Caution guides the path forward",
            "Watch for what tomorrow hides",
            "Fear the unseen that approaches",
            "Beware the storm yet to break",
            "Mind the dangers drawing near",
            "Heed the whispers of fate",
            "Look out for hidden perils",
            "Beware what fate conceals",
            "Watch for coming trials",
            "Take care with steps ahead",
            "Fear what waits in silence",
            "Beware the unknown future",
            "Caution rules the wise",
            "Mind what lies in wait",
            "Heed the winds of change",
            "Watch for unseen threats",
            "Beware time's secret plans",
            "Look to the shadows coming"
        ];

        // Device detection
        const ua = navigator.userAgent.toLowerCase();
        const device = /iphone|ipad|ipod/.test(ua) ? 'iPhone' :
                      /android/.test(ua) ? 'Android' : 'Computer';
        
        // Initialize first screen
        const deviceText = document.getElementById('device-text');
        deviceText.innerHTML = `${device}<br>${proverbs[Math.floor(Math.random() * proverbs.length)]}`;

        // Screen management
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
                screen.style.opacity = '1'; // Reset opacity
            });
            const nextScreen = document.getElementById(screenId);
            nextScreen.classList.add('active');
            // Ensure input is focused for mobile
            const input = nextScreen.querySelector('input');
            if (input) setTimeout(() => input.focus(), 100);
        }

        // Start sequence
        function startSequence() {
            setTimeout(() => {
                deviceText.style.opacity = '0';
                setTimeout(() => {
                    showScreen('name-screen');
                }, 1000);
            }, 3000);
        }

        // Name handling
        const nameInput = document.getElementById('name-input');
        nameInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const name = e.target.value.trim();
                if (name && !name.includes(' ')) {
                    showScreen('name-display');
                    const nameDisplay = document.getElementById('name-display');
                    nameDisplay.textContent = name;
                    
                    // Background color
                    const firstLetter = name[0].toLowerCase();
                    document.body.style.backgroundColor = `hsl(${firstLetter.charCodeAt(0) * 3}, 50%, 20%)`;

                    // Particle effects
                    const bounds = nameDisplay.getBoundingClientRect();
                    for (let i = 0; i < 50; i++) {
                        const spark = document.createElement('div');
                        spark.className = 'spark';
                        const mist = document.createElement('div');
                        mist.className = 'mist';
                        const x = bounds.left + bounds.width/2 + (Math.random() - 0.5) * bounds.width;
                        const y = bounds.top + bounds.height/2 + (Math.random() - 0.5) * bounds.height;
                        spark.style.left = `${x}px`;
                        spark.style.top = `${y}px`;
                        mist.style.left = `${x + (Math.random() - 0.5) * 50}px`;
                        mist.style.top = `${y + 50}px`;
                        document.body.appendChild(spark);
                        document.body.appendChild(mist);
                        setTimeout(() => { spark.remove(); mist.remove(); }, 2000);
                    }

                    setTimeout(() => {
                        nameDisplay.style.opacity = '0';
                        setTimeout(() => {
                            showScreen('age-screen');
                        }, 1000);
                    }, 3000);
                }
            }
        });

        // Age handling
        const ageInput = document.getElementById('age-input');
        ageInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const age = parseInt(e.target.value);
                if (!isNaN(age)) {
                    showScreen('response-screen');
                    const responseText = document.getElementById('response-text');
                    
                    if (age < 13) {
                        responseText.textContent = 'Better luck next time.';
                    } else if (age <= 25) {
                        responseText.textContent = 'You need to buy lots of junk on Amazon.';
                    } else if (age <= 39) {
                        responseText.innerHTML = 'Are you ready to dedicate the next 12 years reading Wikipedia?<br>' +
                            '<a href="https://wikipedia.org" target="_blank" style="color: white">Wikipedia</a><br>' +
                            '<div class="buttons">' +
                            '<button onclick="window.open(\'https://amazon.com\', \'_blank\')">No</button>' +
                            '<button onclick="showLocation()">Yes</button>' +
                            '</div>';
                    } else if (age <= 99) {
                        document.body.style.backgroundColor = 'white';
                        createDots();
                    }
                }
            }
        });

        function showLocation() {
            showScreen('location-screen');
            const locationTime = document.getElementById('location-time');
            const currentTime = new Date().toLocaleTimeString();
            let countdown = 999;

            fetch('https://ipapi.co/json/')
                .then(response => response.json())
                .then(data => {
                    const location = `${data.city || 'Unknown'}, ${data.region || ''}, ${data.country_name || ''}`;
                    locationTime.innerHTML = `Time: ${currentTime}<br>Location: ${location}<br>Countdown: <span id="timer">${countdown}</span> seconds`;
                    startTimer(countdown);
                })
                .catch(() => {
                    locationTime.innerHTML = `Time: ${currentTime}<br>Location: Unknown<br>Countdown: <span id="timer">${countdown}</span> seconds`;
                    startTimer(countdown);
                });
        }

        function startTimer(countdown) {
            const timerSpan = document.getElementById('timer');
            const interval = setInterval(() => {
                countdown--;
                timerSpan.textContent = countdown;
                if (countdown <= 0) clearInterval(interval);
            }, 1000);
        }

        function createDots() {
            let count = 0;
            const interval = setInterval(() => {
                if (count >= 200) {
                    clearInterval(interval);
                    return;
                }
                const dot = document.createElement('div');
                dot.className = 'dot';
                const size = Math.random() * 20 + 5;
                dot.style.width = `${size}px`;
                dot.style.height = `${size}px`;
                dot.style.left = `${Math.random() * window.innerWidth}px`;
                dot.style.top = `${Math.random() * window.innerHeight}px`;
                document.body.appendChild(dot);
                count++;
            }, 50);
        }

        // Start the sequence when page loads
        window.onload = startSequence;
    </script>
</body>
</html>
