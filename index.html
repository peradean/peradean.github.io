<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Device Mystery</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: black;
            overflow: hidden;
        }

        #device-text {
            color: gray;
            font-family: serif;
            font-size: 16px;
            text-align: center;
            opacity: 1;
            transition: opacity 1s ease;
        }

        #mist {
            opacity: 0;
        }

        .input-container {
            display: none;
            flex-direction: column;
            align-items: center;
        }

        .prompt {
            color: #00ff00;
            text-align: center;
            margin-bottom: 10px;
        }

        input {
            background: none;
            border: 1px solid gray;
            color: white;
            padding: 5px;
            text-align: center;
        }

        #character-name {
            font-size: 72px;
            color: white;
            position: absolute;
            display: none;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        }

        .spark {
            position: absolute;
            width: 5px;
            height: 5px;
            background: white;
            border-radius: 50%;
            animation: sparkle 1.5s linear;
            box-shadow: 0 0 5px white;
        }

        .mist-particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            animation: mist 2s linear;
        }

        @keyframes sparkle {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            100% { transform: scale(2) rotate(180deg); opacity: 0; }
        }

        @keyframes mist {
            0% { transform: translateY(0); opacity: 0.5; }
            100% { transform: translateY(-50px); opacity: 0; }
        }

        #age-response {
            color: white;
            margin-top: 20px;
            display: none;
            text-align: center;
        }

        .buttons {
            margin-top: 10px;
        }

        button {
            margin: 0 5px;
            padding: 5px 10px;
        }

        .dot {
            position: absolute;
            background: black;
            border-radius: 50%;
        }

        #location-time {
            color: white;
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>
    <div id="device-text"></div>
    <div class="input-container" id="name-input">
        <div class="prompt" id="name-prompt">NAME YOUR CHARACTER</div>
        <input type="text" id="name-field" maxlength="20">
    </div>
    <div id="character-name"></div>
    <div class="input-container" id="age-input">
        <div class="prompt" id="age-prompt">HOW OLD ARE YOU?</div>
        <input type="number" id="age-field" maxlength="2">
    </div>
    <div id="age-response"></div>
    <div id="location-time"></div>

    <script>
        // Device detection
        const ua = navigator.userAgent.toLowerCase();
        let device = 'unknown';
        if (/iphone|ipad|ipod/.test(ua)) device = 'iPhone';
        else if (/android/.test(ua)) device = 'Android';
        else if (/mac|win|linux|chromebook/.test(ua)) device = 'Computer';

        // Proverbs array
        const proverbs = [
            "Beware what lurks in shadows ahead",
            "Take heed of coming darkness",
            "Caution guides the path forward",
            "Watch for what tomorrow hides",
            "Fear the unseen that approaches",
            "Beware the storm yet to break",
            "Mind the dangers drawing near",
            "Heed the whispers of fate",
            "Look out for hidden perils",
            "Beware what fate conceals",
            "Watch for coming trials",
            "Take care with steps ahead",
            "Fear what waits in silence",
            "Beware the unknown future",
            "Caution rules the wise",
            "Mind what lies in wait",
            "Heed the winds of change",
            "Watch for unseen threats",
            "Beware time's secret plans",
            "Look to the shadows coming"
        ];

        // Initial display
        const deviceText = document.getElementById('device-text');
        const randomProverb = proverbs[Math.floor(Math.random() * proverbs.length)];
        deviceText.innerHTML = `${device}<br>${randomProverb}`;

        // Fade out after 3 seconds
        setTimeout(() => {
            deviceText.style.opacity = '0';
            setTimeout(() => {
                document.getElementById('name-input').style.display = 'flex';
            }, 1000);
        }, 3000);

        // Name input handling
        const nameField = document.getElementById('name-field');
        const characterName = document.getElementById('character-name');
        nameField.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && nameField.value.trim().split(' ').length === 1) {
                document.getElementById('name-input').style.display = 'none';
                const name = nameField.value.trim();
                characterName.textContent = name;
                characterName.style.display = 'block';

                // Background color based on first letter
                const firstLetter = name[0].toLowerCase();
                document.body.style.backgroundColor = `hsl(${firstLetter.charCodeAt(0) * 3}, 50%, 20%)`;

                // Enhanced spark and mist animation
                for (let i = 0; i < 50; i++) {
                    const spark = document.createElement('div');
                    spark.className = 'spark';
                    const x = window.innerWidth / 2 + (Math.random() - 0.5) * 250;
                    const y = window.innerHeight / 2 + (Math.random() - 0.5) * 150;
                    spark.style.left = `${x}px`;
                    spark.style.top = `${y}px`;
                    document.body.appendChild(spark);
                    setTimeout(() => spark.remove(), 1500);

                    const mist = document.createElement('div');
                    mist.className = 'mist-particle';
                    mist.style.left = `${x + (Math.random() - 0.5) * 50}px`;
                    mist.style.top = `${y + 50}px`;
                    document.body.appendChild(mist);
                    setTimeout(() => mist.remove(), 2000);
                }

                setTimeout(() => {
                    characterName.style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('age-input').style.display = 'flex';
                        characterName.style.display = 'none';
                    }, 1000);
                }, 3000); // Reduced from 5000 to 3000 (2 seconds less)
            }
        });

        // Age input handling
        const ageField = document.getElementById('age-field');
        const ageResponse = document.getElementById('age-response');
        ageField.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                document.getElementById('age-input').style.display = 'none';
                const age = parseInt(ageField.value);
                ageResponse.style.display = 'block';

                if (age < 13) {
                    ageResponse.textContent = 'Better luck next time.';
                } else if (age >= 13 && age <= 25) {
                    ageResponse.textContent = 'You need to buy lots of junk on Amazon.';
                } else if (age >= 26 && age <= 39) {
                    ageResponse.innerHTML = 'Are you ready to dedicate the next 12 years of your life reading nothing but Wikipedia articles?<br>' +
                        '<a href="https://wikipedia.org" target="_blank">Wikipedia</a><br>' +
                        '<div class="buttons"><button onclick="window.open(\'https://amazon.com\')">No</button><button onclick="showLocationTime()">Yes</button></div>';
                } else if (age >= 40 && age <= 99) {
                    document.body.style.backgroundColor = 'white';
                    createDots();
                }
            }
        });

        function showLocationTime() {
            ageResponse.style.display = 'none';
            const locationTime = document.getElementById('location-time');
            locationTime.style.display = 'block';
            
            const currentTime = new Date().toLocaleTimeString();
            let countdown = 999;
            
            // Simple IP-based location (using free API)
            fetch('https://ipapi.co/json/')
                .then(response => response.json())
                .then(data => {
                    const location = `${data.city}, ${data.region}, ${data.country_name}`;
                    locationTime.innerHTML = `Time: ${currentTime}<br>Location
